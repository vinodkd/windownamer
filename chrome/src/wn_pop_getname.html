<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Enter a name for this window</title>
    <script type="text/javascript" charset="utf-8">
      var bgpg;

      function onload(){
        bgpg = chrome.extension.getBackgroundPage();
        console.log("bgpg:"+bgpg);
      }

      function storeName(){
        var wname = document.getElementById("windowname_tb");
        var wid ="";
        chrome.windows.getCurrent(function (win){
          wid=win.id;
          console.log(wid+", "+wname.value);
          bgpg.addNameForWindow(wid,wname.value);
          window.close();
        });
      }
    </script>
  </head>
  <body onload="onload()">
    <form>
      <span>
        <label for="windowname_tb">Enter a name for this window:</label>
        <input type="text" name="" value="" id="windowname_tb">
      </span>
      <div><input type="submit" onclick="storeName()" value="Continue &rarr;"></div>
    </form>
  </body>
</html>